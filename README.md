<h1 align="center">ä»£ç åº“çŸ¥è¯†æ„å»ºå™¨</h1>

<p align="center">
  <a href="https://github.com/The-Pocket/PocketFlow" target="_blank">
    <img
      src="./assets/banner.png" width="600"
    />
  </a>
</p>

è¿™ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ªä»£ç åº“çŸ¥è¯†æ„å»ºå·¥å…·ï¼ŒåŸºäº [Pocket Flow](https://github.com/The-Pocket/PocketFlow) æ¡†æ¶å¼€å‘ï¼Œç”¨äºåˆ†æ Git ä»“åº“å¹¶ç”ŸæˆçŸ¥è¯†æ–‡æ¡£ã€‚

## åŠŸèƒ½

- ğŸ” åˆ†æ Git ä»“åº“çš„æäº¤å†å²å’Œä»£ç ç»“æ„
- ğŸ§© è¯†åˆ«é‡è¦æ–‡ä»¶ã€æ¨¡å—å’Œè´¡çŒ®è€…
- ğŸ¤– ä½¿ç”¨ LLM ç”Ÿæˆå…¨é¢çš„ä»£ç åº“æ–‡æ¡£
- ğŸ“Š ç”Ÿæˆæ¶æ„å›¾ã€ä¾èµ–å…³ç³»å›¾å’Œæ—¶é—´çº¿å›¾è¡¨
- ğŸ“ ç›´æ¥ä»¥ç”¨æˆ·æŒ‡å®šè¯­è¨€ç”Ÿæˆå†…å®¹ï¼Œæ— éœ€é¢å¤–ç¿»è¯‘
- ğŸŒ æ”¯æŒå¤šç§ LLM æä¾›å•†ï¼ˆOpenAIã€OpenRouterã€é˜¿é‡Œç™¾ç‚¼ã€ç«å±±å¼•æ“ã€ç¡…åŸºæµåŠ¨ï¼‰
- âš¡ æ”¯æŒå¼‚æ­¥å¹¶è¡Œå¤„ç†ï¼Œæé«˜ç”Ÿæˆæ•ˆç‡
- ğŸ”„ æä¾›å†…å®¹è´¨é‡æ£€æŸ¥å’Œè‡ªåŠ¨ä¼˜åŒ–
- ğŸ’¬ æ”¯æŒäº¤äº’å¼é—®ç­”ï¼Œæ·±å…¥äº†è§£ä»£ç åº“
- ğŸ¨ **Mermaidå›¾è¡¨éªŒè¯å’Œè‡ªåŠ¨ä¿®å¤**ï¼Œç¡®ä¿å›¾è¡¨è¯­æ³•æ­£ç¡®
- ğŸ“ˆ **æ™ºèƒ½è´¨é‡è¯„ä¼°**ï¼Œ7ç»´åº¦æ–‡æ¡£è´¨é‡æ£€æŸ¥
- ğŸš€ **é«˜æ€§èƒ½å¹¶è¡Œå¤„ç†**ï¼Œæ”¯æŒå¤§å‹ä»£ç åº“å¿«é€Ÿåˆ†æ
- ğŸ”§ **æ¨¡å—åŒ–æ¶æ„**ï¼Œæ˜“äºæ‰©å±•å’Œå®šåˆ¶
- ğŸ’¾ **æ™ºèƒ½ç¼“å­˜æœºåˆ¶**ï¼Œé¿å…é‡å¤è®¡ç®—å’ŒAPIè°ƒç”¨

## å®‰è£…

1. å…‹éš†ä»“åº“ï¼š

```bash
git clone https://github.com/yourusername/codebase-knowledge-builder.git
cd codebase-knowledge-builder
```

2. ç¡®ä¿å·²å®‰è£… uvï¼š

```bash
# ä½¿ç”¨ pip å®‰è£… uv
pip install uv

# æˆ–ä½¿ç”¨ curl å®‰è£…
curl -sSf https://install.python-uv.org | python3
```

3. ä½¿ç”¨æä¾›çš„è„šæœ¬è®¾ç½®ç¯å¢ƒï¼š

```bash
./scripts/setup.sh
```

è¿™ä¸ªè„šæœ¬ä¼šä½¿ç”¨ uv åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…æ‰€æœ‰ä¾èµ–ã€‚

### VSCode é›†æˆ

æœ¬é¡¹ç›®åŒ…å« VSCode é…ç½®æ–‡ä»¶ï¼Œæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š

- è‡ªåŠ¨æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
- ä»£ç æ ¼å¼åŒ–å’Œæ£€æŸ¥è®¾ç½®
- è°ƒè¯•é…ç½®
- å¸¸ç”¨ä»»åŠ¡å¿«æ·æ–¹å¼
- æ¨èæ‰©å±•

ä½¿ç”¨ VSCode æ‰“å¼€é¡¹ç›®æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨ä½¿ç”¨é¡¹ç›®çš„è™šæ‹Ÿç¯å¢ƒã€‚æ‚¨è¿˜å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®é¢„é…ç½®çš„ä»»åŠ¡ï¼š

1. æŒ‰ä¸‹ `Ctrl+Shift+P`ï¼ˆWindows/Linuxï¼‰æˆ– `Cmd+Shift+P`ï¼ˆmacOSï¼‰
2. è¾“å…¥ "Tasks: Run Task"
3. é€‰æ‹©è¦è¿è¡Œçš„ä»»åŠ¡ï¼Œå¦‚ "è®¾ç½®ç¯å¢ƒ"ã€"è¿è¡Œæµ‹è¯•" ç­‰

## é…ç½®

### ç¯å¢ƒå˜é‡é…ç½®

ç¯å¢ƒå˜é‡ä¸»è¦ç”¨äºé…ç½®æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ API å¯†é’¥ï¼‰æˆ–éœ€è¦åœ¨ä¸åŒç¯å¢ƒä¸­è¦†ç›–çš„é…ç½®ã€‚

1. å¤åˆ¶ `.env.example` æ–‡ä»¶ä¸º `.env`ï¼š

```bash
cp .env.example .env
```

2. ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œè®¾ç½®å¿…è¦çš„ API å¯†é’¥ï¼š

```
# å¿…éœ€çš„é…ç½®
LLM_API_KEY=your_api_key_here  # LLM APIå¯†é’¥
LANGFUSE_PUBLIC_KEY=your_public_key_here  # Langfuseå…¬é’¥ï¼ˆå¯é€‰ï¼Œç”¨äºè·Ÿè¸ªå’Œè¯„ä¼°ï¼‰
LANGFUSE_SECRET_KEY=your_secret_key_here  # Langfuseç§é’¥ï¼ˆå¯é€‰ï¼Œç”¨äºè·Ÿè¸ªå’Œè¯„ä¼°ï¼‰

# LLMé…ç½®ï¼ˆå¯é€‰ï¼‰
LLM_MODEL=openai/gpt-4  # æ ¼å¼: "provider/model"ï¼Œä¾‹å¦‚: "openai/gpt-4", "anthropic/claude-3-opus-20240229"
LLM_BASE_URL=https://api.openai.com/v1  # è‡ªå®šä¹‰APIåŸºç¡€URL
LLM_MAX_TOKENS=4000  # æ§åˆ¶LLMè¾“å‡ºçš„æœ€å¤§tokenæ•°
# LLM_MAX_INPUT_TOKENS=25000  # æ§åˆ¶è¾“å…¥åˆ°LLMçš„æœ€å¤§tokenæ•°ï¼ˆå¯é€‰ï¼‰
```

å…¶ä»–é…ç½®é¡¹å·²åœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®é»˜è®¤å€¼ï¼Œåªæœ‰åœ¨éœ€è¦è¦†ç›–é»˜è®¤å€¼æ—¶æ‰éœ€è¦åœ¨ç¯å¢ƒå˜é‡ä¸­è®¾ç½®ã€‚

#### LLMæä¾›å•†é…ç½®

æ”¯æŒçš„LLMæä¾›å•†æ ¼å¼ï¼š

- **OpenAI**: `openai/gpt-4`ã€`openai/gpt-3.5-turbo`
- **Anthropic**: `anthropic/claude-3-opus-20240229`ã€`anthropic/claude-3-sonnet-20240229`
- **OpenRouter**: `openrouter/anthropic/claude-3-opus-20240229`
- **é˜¿é‡Œç™¾ç‚¼**: `alibaba/qwen-max`
- **ç«å±±å¼•æ“**: `volcengine/moonshot-v1-8k`
- **ç¡…åŸºæµåŠ¨**: `moonshot/moonshot-v1-8k`

### YAML é…ç½®æ–‡ä»¶

é¡¹ç›®ä½¿ç”¨ YAML é…ç½®æ–‡ä»¶æ¥å­˜å‚¨é»˜è®¤é…ç½®ï¼Œä½äº `config` ç›®å½•ä¸‹ï¼š

- `config/default.yml`ï¼šé»˜è®¤é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰é…ç½®é¡¹çš„é»˜è®¤å€¼
- `config/{env}.yml`ï¼šç¯å¢ƒç‰¹å®šé…ç½®æ–‡ä»¶ï¼Œå¦‚ `development.yml`ã€`production.yml` ç­‰

å¤§å¤šæ•°é…ç½®éƒ½åº”è¯¥åœ¨ YAML é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼Œè€Œä¸æ˜¯ç¯å¢ƒå˜é‡ã€‚è¿™æ ·å¯ä»¥ï¼š

1. é›†ä¸­ç®¡ç†é…ç½®
2. æ›´å¥½åœ°ç»„ç»‡å’Œåˆ†ç±»é…ç½®
3. æ”¯æŒå±‚æ¬¡ç»“æ„å’Œå¤æ‚é…ç½®
4. ä¾¿äºç‰ˆæœ¬æ§åˆ¶å’Œå®¡æŸ¥

æ‚¨å¯ä»¥é€šè¿‡åˆ›å»ºç¯å¢ƒç‰¹å®šçš„é…ç½®æ–‡ä»¶æ¥è¦†ç›–é»˜è®¤é…ç½®ï¼Œä¾‹å¦‚ï¼š

```bash
cp config/default.yml config/production.yml
```

ç„¶åç¼–è¾‘ `config/production.yml` æ–‡ä»¶ï¼Œåªä¿®æ”¹éœ€è¦è¦†ç›–çš„é…ç½®é¡¹ã€‚ä¾‹å¦‚ï¼š

```yaml
# ç”Ÿäº§ç¯å¢ƒé…ç½®
llm:
  model: "gpt-3.5-turbo"  # ä½¿ç”¨æ›´ç»æµçš„æ¨¡å‹
  temperature: 0.5        # é™ä½éšæœºæ€§

git:
  cache_ttl: 3600         # ç¼“å­˜æ—¶é—´ç¼©çŸ­ä¸º 1 å°æ—¶
```

è¿è¡Œç¨‹åºæ—¶ï¼Œå¯ä»¥é€šè¿‡ `--env` å‚æ•°æŒ‡å®šç¯å¢ƒï¼š

```bash
python main.py --repo-url https://github.com/username/repo.git --env production
```

### ğŸ†• æ–°å¢é…ç½®é€‰é¡¹

#### Mermaidå›¾è¡¨éªŒè¯é…ç½®
```yaml
mermaid_validation:
  enabled: true                    # å¯ç”¨MermaidéªŒè¯
  use_cli: true                   # ä¼˜å…ˆä½¿ç”¨mermaid-cli
  fallback_to_rules: true         # CLIå¤±è´¥æ—¶å›é€€åˆ°è§„åˆ™éªŒè¯
  backup_files: true              # ä¿®å¤å‰å¤‡ä»½æ–‡ä»¶
  max_regeneration_attempts: 2    # æœ€å¤§é‡æ–°ç”Ÿæˆæ¬¡æ•°
```

#### å¹¶è¡Œå¤„ç†é…ç½®
```yaml
parallel_processing:
  enabled: true                   # å¯ç”¨å¹¶è¡Œå¤„ç†
  max_workers: 4                  # æœ€å¤§å·¥ä½œçº¿ç¨‹æ•°
  max_concurrent_llm_calls: 3     # æœ€å¤§å¹¶å‘LLMè°ƒç”¨æ•°
  enable_async: true              # å¯ç”¨å¼‚æ­¥å¤„ç†
```

#### è´¨é‡è¯„ä¼°é…ç½®
```yaml
quality_assessment:
  enabled: true                   # å¯ç”¨è´¨é‡è¯„ä¼°
  overall_threshold: 7.0          # æ€»ä½“è´¨é‡é˜ˆå€¼
  auto_regenerate: true           # è‡ªåŠ¨é‡æ–°ç”Ÿæˆä½è´¨é‡æ–‡æ¡£
  detailed_feedback: true         # æä¾›è¯¦ç»†åé¦ˆ
```

## ä½¿ç”¨æ–¹æ³•

### ä½¿ç”¨è„šæœ¬è¿è¡Œ

æˆ‘ä»¬æä¾›äº†å‡ ä¸ªä¾¿æ·çš„è„šæœ¬æ¥ç®€åŒ–å¸¸è§æ“ä½œï¼š

#### è¿è¡Œä¸»ç¨‹åº

```bash
./scripts/run.sh https://github.com/username/repo.git [branch] [language] [env] [parallel]
```

å‚æ•°è¯´æ˜ï¼š
- ç¬¬ä¸€ä¸ªå‚æ•°ï¼šGit ä»“åº“ URLï¼ˆå¿…éœ€ï¼‰
- ç¬¬äºŒä¸ªå‚æ•°ï¼šåˆ†æ”¯åç§°ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º `main`ï¼‰
- ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šæ–‡æ¡£è¯­è¨€ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º `zh`ï¼‰
- ç¬¬å››ä¸ªå‚æ•°ï¼šç¯å¢ƒåç§°ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º `default`ï¼‰
- ç¬¬äº”ä¸ªå‚æ•°ï¼šæ˜¯å¦å¯ç”¨å¹¶è¡Œå¤„ç†ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º `false`ï¼‰

ä¾‹å¦‚ï¼š
```bash
# åŸºæœ¬ç”¨æ³•
./scripts/run.sh https://github.com/username/repo.git

# æŒ‡å®šåˆ†æ”¯å’Œè¯­è¨€
./scripts/run.sh https://github.com/username/repo.git develop en

# å®Œæ•´å‚æ•°
./scripts/run.sh https://github.com/username/repo.git develop zh production true
```

#### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
./scripts/run_tests.sh
```

#### æ›´æ–°ä¾èµ–

```bash
./scripts/update_deps.sh
```

#### æ¸…ç†ç¯å¢ƒ

```bash
./scripts/clean.sh
```

### æ‰‹åŠ¨è¿è¡Œ

å¦‚æœæ‚¨æƒ³æ‰‹åŠ¨è¿è¡Œç¨‹åºï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

#### ç›´æ¥ä½¿ç”¨ä¸»ç¨‹åº

```bash
source .venv/bin/activate
python main.py --repo-url https://github.com/username/repo.git --branch main --env default --language zh
```

å¯ç”¨çš„å‘½ä»¤è¡Œå‚æ•°ï¼š

- `--repo-url`ï¼šGit ä»“åº“ URLï¼ˆå¿…éœ€ï¼‰
- `--branch`ï¼šåˆ†æ”¯åç§°ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­çš„ `git.default_branch`ï¼‰
- `--output-dir`ï¼šè¾“å‡ºç›®å½•è·¯å¾„ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º `docs_output`ï¼‰
- `--language`ï¼šæ–‡æ¡£è¯­è¨€ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º `zh`ï¼‰
- `--env`ï¼šç¯å¢ƒåç§°ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º `default`ï¼‰
- `--parallel`ï¼šæ˜¯å¦å¯ç”¨å¹¶è¡Œå¤„ç†ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º `False`ï¼‰
- `--interactive`ï¼šæ˜¯å¦å¯ç”¨äº¤äº’å¼é—®ç­”ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º `False`ï¼‰

#### è¿è¡Œæµ‹è¯•è„šæœ¬

```bash
source .venv/bin/activate

# åˆ†æ Git ä»“åº“å†å²
python tests/test_analyze_history.py --repo-path /path/to/repo --max-commits 100

# æµ‹è¯•ä»£ç è§£æ
python tests/test_code_parser.py --repo-path /path/to/repo

# æµ‹è¯•å†…å®¹ç”Ÿæˆ
python tests/test_generate_content_flow.py --repo-url https://github.com/username/repo.git

# æµ‹è¯•å¹¶è¡Œæ€§èƒ½
python tests/test_parallel_performance.py --repo-url https://github.com/username/repo.git
```

#### è¿è¡Œå®Œæ•´æµç¨‹ï¼ˆæµ‹è¯•è„šæœ¬ï¼‰

```bash
source .venv/bin/activate
python tests/test_flow.py --repo-url https://github.com/username/repo.git --branch main --language zh
```

#### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
source .venv/bin/activate
python run_tests.py --all
```

#### æŸ¥çœ‹ç”Ÿæˆçš„æ–‡æ¡£

ç”Ÿæˆçš„æ–‡æ¡£å°†ä¿å­˜åœ¨ `docs_output/{repo_name}/` ç›®å½•ä¸‹ï¼ŒåŒ…æ‹¬ï¼š

- `index.md`ï¼šæ–‡æ¡£é¦–é¡µ
- `overview.md`ï¼šç³»ç»Ÿæ¶æ„
- `dependency.md`ï¼šä¾èµ–å…³ç³»
- `glossary.md`ï¼šæœ¯è¯­è¡¨
- `timeline.md`ï¼šæ¼”å˜å†å²
- `quick_look.md`ï¼šå¿«é€Ÿæµè§ˆ
- `modules/`ï¼šæ¨¡å—è¯¦ç»†æ–‡æ¡£

## é¡¹ç›®ç»“æ„

- `src/`: æºä»£ç 
  - `nodes/`: èŠ‚ç‚¹å®ç°
    - `ai_understand_core_modules_node.py`: AIç†è§£æ ¸å¿ƒæ¨¡å—èŠ‚ç‚¹
    - `analyze_history_node.py`: å†å²åˆ†æèŠ‚ç‚¹
    - `analyze_repo_flow.py`: ä»“åº“åˆ†ææµç¨‹
    - `async_parallel_batch_node.py`: å¼‚æ­¥å¹¶è¡Œæ‰¹å¤„ç†èŠ‚ç‚¹
    - `async_parallel_flow.py`: å¼‚æ­¥å¹¶è¡Œæµç¨‹
    - `combine_content_node.py`: å†…å®¹ç»„åˆèŠ‚ç‚¹
    - `content_quality_check_node.py`: å†…å®¹è´¨é‡æ£€æŸ¥èŠ‚ç‚¹
    - `flow_connector_nodes.py`: æµç¨‹è¿æ¥å™¨èŠ‚ç‚¹
    - `format_output_node.py`: è¾“å‡ºæ ¼å¼åŒ–èŠ‚ç‚¹
    - `generate_api_docs_node.py`: APIæ–‡æ¡£ç”ŸæˆèŠ‚ç‚¹
    - `generate_content_flow.py`: å†…å®¹ç”Ÿæˆæµç¨‹
    - `generate_dependency_node.py`: ä¾èµ–å…³ç³»ç”ŸæˆèŠ‚ç‚¹
    - `generate_glossary_node.py`: æœ¯è¯­è¡¨ç”ŸæˆèŠ‚ç‚¹
    - `generate_module_details_node.py`: æ¨¡å—è¯¦æƒ…ç”ŸæˆèŠ‚ç‚¹
    - `generate_overall_architecture_node.py`: æ•´ä½“æ¶æ„ç”ŸæˆèŠ‚ç‚¹
    - `generate_quick_look_node.py`: å¿«é€Ÿæµè§ˆç”ŸæˆèŠ‚ç‚¹
    - `generate_timeline_node.py`: æ—¶é—´çº¿ç”ŸæˆèŠ‚ç‚¹
    - `input_node.py`: è¾“å…¥èŠ‚ç‚¹
    - `interactive_qa_node.py`: äº¤äº’å¼é—®ç­”èŠ‚ç‚¹
    - `mermaid_validation_node.py`: **Mermaidå›¾è¡¨éªŒè¯èŠ‚ç‚¹**
    - `module_quality_check_node.py`: æ¨¡å—è´¨é‡æ£€æŸ¥èŠ‚ç‚¹
    - `parallel_generate_content_flow.py`: å¹¶è¡Œå†…å®¹ç”Ÿæˆæµç¨‹
    - `parallel_start_node.py`: å¹¶è¡Œå¯åŠ¨èŠ‚ç‚¹
    - `parse_code_batch_node.py`: ä»£ç æ‰¹é‡è§£æèŠ‚ç‚¹
    - `parse_code_node.py`: ä»£ç è§£æèŠ‚ç‚¹
    - `prepare_rag_data_node.py`: RAGæ•°æ®å‡†å¤‡èŠ‚ç‚¹
    - `prepare_repo_node.py`: ä»“åº“å‡†å¤‡èŠ‚ç‚¹
    - `publish_node.py`: å‘å¸ƒèŠ‚ç‚¹
  - `utils/`: å·¥å…·ç±»
    - `git_utils/`: Git ç›¸å…³å·¥å…·
      - `history_analyzer.py`: å†å²åˆ†æå™¨
      - `repo_manager.py`: ä»“åº“ç®¡ç†å™¨
    - `llm_wrapper/`: LLM è°ƒç”¨å·¥å…·
      - `llm_client_async.py`: å¼‚æ­¥LLMå®¢æˆ·ç«¯
      - `llm_client_base.py`: åŸºç¡€LLMå®¢æˆ·ç«¯
      - `llm_client_langfuse.py`: Langfuseé›†æˆå®¢æˆ·ç«¯
      - `llm_client_sync.py`: åŒæ­¥LLMå®¢æˆ·ç«¯
      - `llm_client_utils.py`: LLMå®¢æˆ·ç«¯å·¥å…·
      - `llm_client.py`: LLMå®¢æˆ·ç«¯
      - `token_utils.py`: Tokenå·¥å…·
    - `logger/`: æ—¥å¿—å·¥å…·
    - `code_parser_base.py`: ä»£ç è§£æåŸºç±»
    - `code_parser_extractors.py`: ä»£ç è§£ææå–å™¨
    - `code_parser_file.py`: æ–‡ä»¶ä»£ç è§£æå™¨
    - `code_parser_repo.py`: ä»“åº“ä»£ç è§£æå™¨
    - `code_parser.py`: ä»£ç è§£æå™¨
    - `config_loader.py`: é…ç½®åŠ è½½å™¨
    - `env_manager.py`: ç¯å¢ƒç®¡ç†å™¨
    - `formatter.py`: æ ¼å¼åŒ–å·¥å…·
    - `language_utils.py`: è¯­è¨€å·¥å…·
    - `llm_client.py`: LLMå®¢æˆ·ç«¯
    - `logging_config.py`: æ—¥å¿—é…ç½®
    - `mermaid_validator.py`: **Mermaidå›¾è¡¨éªŒè¯å™¨**
    - `mermaid_regenerator.py`: **Mermaidå›¾è¡¨é‡æ–°ç”Ÿæˆå™¨**
    - `performance.py`: æ€§èƒ½å·¥å…·
    - `rag_utils.py`: RAGå·¥å…·
- `tests/`: æµ‹è¯•è„šæœ¬
  - `test_analyze_history.py`: å†å²åˆ†ææµ‹è¯•
  - `test_analyze_repo.py`: ä»“åº“åˆ†ææµ‹è¯•
  - `test_code_parser.py`: ä»£ç è§£ææµ‹è¯•
  - `test_combine_content_node.py`: å†…å®¹ç»„åˆèŠ‚ç‚¹æµ‹è¯•
  - `test_config_loader.py`: é…ç½®åŠ è½½å™¨æµ‹è¯•
  - `test_env_manager.py`: ç¯å¢ƒç®¡ç†å™¨æµ‹è¯•
  - `test_flow.py`: æµç¨‹æµ‹è¯•
  - `test_format_output_node.py`: è¾“å‡ºæ ¼å¼åŒ–èŠ‚ç‚¹æµ‹è¯•
  - `test_formatter.py`: æ ¼å¼åŒ–å·¥å…·æµ‹è¯•
  - `test_generate_content_flow.py`: å†…å®¹ç”Ÿæˆæµç¨‹æµ‹è¯•
  - `test_generate_docs.py`: æ–‡æ¡£ç”Ÿæˆæµ‹è¯•
  - `test_generate_module_details_node.py`: æ¨¡å—è¯¦æƒ…ç”ŸæˆèŠ‚ç‚¹æµ‹è¯•
  - `test_input_prepare.py`: è¾“å…¥å‡†å¤‡æµ‹è¯•
  - `test_interactive_qa_node.py`: äº¤äº’å¼é—®ç­”èŠ‚ç‚¹æµ‹è¯•
  - `test_litellm_logging.py`: LiteLLMæ—¥å¿—æµ‹è¯•
  - `test_llm_call.py`: LLMè°ƒç”¨æµ‹è¯•
  - `test_llm_client_optimized.py`: ä¼˜åŒ–LLMå®¢æˆ·ç«¯æµ‹è¯•
  - `test_mermaid_validation.py`: **MermaidéªŒè¯æµ‹è¯•**
  - `test_model_config.py`: æ¨¡å‹é…ç½®æµ‹è¯•
  - `test_openrouter.py`: OpenRouteræµ‹è¯•
  - `test_optimized_docs_generation.py`: **ä¼˜åŒ–æ–‡æ¡£ç”Ÿæˆæµ‹è¯•**
  - `test_parallel_performance.py`: å¹¶è¡Œæ€§èƒ½æµ‹è¯•
  - `test_prompt_optimization.py`: **æç¤ºè¯ä¼˜åŒ–æµ‹è¯•**
  - `test_publish_node.py`: å‘å¸ƒèŠ‚ç‚¹æµ‹è¯•
  - `test_rag_utils.py`: RAGå·¥å…·æµ‹è¯•
  - `test_token_utils.py`: Tokenå·¥å…·æµ‹è¯•
  - `test_with_requests.py`: Requestsåº“æµ‹è¯•
- `docs/`: æ–‡æ¡£
  - `design.md`: è®¾è®¡æ–‡æ¡£
  - `prompt_optimization_summary.md`: **æç¤ºè¯ä¼˜åŒ–æ€»ç»“**
- `docs_output/`: æ–‡æ¡£è¾“å‡ºç›®å½•
  - `{repo_name}/`: æŒ‰ä»“åº“åç»„ç»‡çš„æ–‡æ¡£
    - `modules/`: æ¨¡å—æ–‡æ¡£
    - `index.md`: æ–‡æ¡£é¦–é¡µ
    - `overview.md`: ç³»ç»Ÿæ¶æ„
    - `dependency.md`: ä¾èµ–å…³ç³»
    - `glossary.md`: æœ¯è¯­è¡¨
    - `timeline.md`: æ¼”å˜å†å²
    - `quick_look.md`: å¿«é€Ÿæµè§ˆ
- `config/`: é…ç½®æ–‡ä»¶
  - `default.yml`: é»˜è®¤é…ç½®æ–‡ä»¶
  - `{env}.yml`: ç¯å¢ƒç‰¹å®šé…ç½®æ–‡ä»¶
- `scripts/`: ä¾¿æ·è„šæœ¬
  - `setup.sh`: è®¾ç½®ç¯å¢ƒè„šæœ¬
  - `update_deps.sh`: æ›´æ–°ä¾èµ–è„šæœ¬
  - `run_tests.sh`: è¿è¡Œæµ‹è¯•è„šæœ¬
  - `run.sh`: è¿è¡Œä¸»ç¨‹åºè„šæœ¬
  - `clean.sh`: æ¸…ç†ç¯å¢ƒè„šæœ¬
- `assets/`: èµ„æºæ–‡ä»¶
  - `banner.png`: é¡¹ç›®æ¨ªå¹…å›¾ç‰‡
- `examples/`: ç¤ºä¾‹æ–‡ä»¶
- `typings/`: ç±»å‹å®šä¹‰
  - `pocketflow/`: PocketFlowç±»å‹å®šä¹‰
- `.vscode/`: VSCode é…ç½®ç›®å½•
  - `settings.json`: VSCode è®¾ç½®
  - `launch.json`: è°ƒè¯•é…ç½®
  - `tasks.json`: ä»»åŠ¡é…ç½®
  - `extensions.json`: æ¨èæ‰©å±•
- `pyproject.toml`: é¡¹ç›®é…ç½®æ–‡ä»¶
- `requirements.txt`: ä¾èµ–åˆ—è¡¨
- `main.py`: ä¸»ç¨‹åºå…¥å£
- `run_tests.py`: æµ‹è¯•è¿è¡Œè„šæœ¬

## é¡¹ç›®æ¶æ„å’Œå·¥ä½œæµç¨‹

é¡¹ç›®åŸºäº [PocketFlow](https://github.com/The-Pocket/PocketFlow) æ¡†æ¶å¼€å‘ï¼Œé‡‡ç”¨èŠ‚ç‚¹å¼æµç¨‹è®¾è®¡ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š

1. **è¾“å…¥ä¸å‡†å¤‡é˜¶æ®µ**ï¼šæ¥æ”¶ç”¨æˆ·è¾“å…¥ï¼Œå‡†å¤‡ä»£ç åº“
   - è¾“å…¥èŠ‚ç‚¹ï¼šæ¥æ”¶ç”¨æˆ·å‚æ•°
   - å‡†å¤‡ä»“åº“èŠ‚ç‚¹ï¼šå…‹éš†æˆ–éªŒè¯æœ¬åœ°ä»£ç åº“

2. **ä»£ç åº“åˆ†æé˜¶æ®µ**ï¼šåˆ†æä»£ç åº“ç»“æ„å’Œå†å²
   - ä»£ç è§£æèŠ‚ç‚¹ï¼šè§£æä»£ç ç»“æ„å’Œä¾èµ–å…³ç³»
   - å†å²åˆ†æèŠ‚ç‚¹ï¼šåˆ†ææäº¤å†å²å’Œè´¡çŒ®è€…ä¿¡æ¯
   - AIç†è§£æ ¸å¿ƒæ¨¡å—èŠ‚ç‚¹ï¼šä½¿ç”¨LLMç†è§£ä»£ç åº“æ ¸å¿ƒæ¶æ„

3. **å†…å®¹ç”Ÿæˆé˜¶æ®µ**ï¼šç”Ÿæˆå„ç±»æ–‡æ¡£å†…å®¹
   - æ•´ä½“æ¶æ„ç”ŸæˆèŠ‚ç‚¹ï¼šç”Ÿæˆç³»ç»Ÿæ¶æ„æ–‡æ¡£
   - ä¾èµ–å…³ç³»ç”ŸæˆèŠ‚ç‚¹ï¼šç”Ÿæˆä¾èµ–å…³ç³»æ–‡æ¡£
   - æ—¶é—´çº¿ç”ŸæˆèŠ‚ç‚¹ï¼šç”Ÿæˆæ¼”å˜å†å²æ–‡æ¡£
   - æœ¯è¯­è¡¨ç”ŸæˆèŠ‚ç‚¹ï¼šç”Ÿæˆæœ¯è¯­è¡¨æ–‡æ¡£
   - å¿«é€Ÿæµè§ˆç”ŸæˆèŠ‚ç‚¹ï¼šç”Ÿæˆå¿«é€Ÿæµè§ˆæ–‡æ¡£
   - æ¨¡å—è¯¦æƒ…ç”ŸæˆèŠ‚ç‚¹ï¼šç”Ÿæˆæ¨¡å—è¯¦ç»†æ–‡æ¡£

4. **è´¨é‡æ£€æŸ¥é˜¶æ®µ**ï¼šæ£€æŸ¥ç”Ÿæˆå†…å®¹è´¨é‡
   - å†…å®¹è´¨é‡æ£€æŸ¥èŠ‚ç‚¹ï¼šè¯„ä¼°æ–‡æ¡£è´¨é‡å¹¶æä¾›æ”¹è¿›å»ºè®®
   - æ¨¡å—è´¨é‡æ£€æŸ¥èŠ‚ç‚¹ï¼šè¯„ä¼°æ¨¡å—æ–‡æ¡£è´¨é‡å¹¶æä¾›æ”¹è¿›å»ºè®®
   - **MermaidéªŒè¯èŠ‚ç‚¹**ï¼šéªŒè¯å’Œä¿®å¤æ–‡æ¡£ä¸­çš„Mermaidå›¾è¡¨

5. **å†…å®¹ç»„åˆä¸æ ¼å¼åŒ–é˜¶æ®µ**ï¼šç»„åˆå’Œæ ¼å¼åŒ–æœ€ç»ˆæ–‡æ¡£
   - å†…å®¹ç»„åˆèŠ‚ç‚¹ï¼šç»„åˆå„éƒ¨åˆ†å†…å®¹
   - æ ¼å¼åŒ–è¾“å‡ºèŠ‚ç‚¹ï¼šæ ¼å¼åŒ–æœ€ç»ˆæ–‡æ¡£

6. **äº¤äº’é—®ç­”é˜¶æ®µ**ï¼ˆå¯é€‰ï¼‰ï¼šæ”¯æŒç”¨æˆ·äº¤äº’å¼é—®ç­”
   - äº¤äº’å¼é—®ç­”èŠ‚ç‚¹ï¼šå›ç­”ç”¨æˆ·å…³äºä»£ç åº“çš„é—®é¢˜

### å¹¶è¡Œå¤„ç†

é¡¹ç›®æ”¯æŒå¤šç§å¹¶è¡Œå¤„ç†æ¨¡å¼ï¼Œæ˜¾è‘—æå‡å¤„ç†æ•ˆç‡ï¼š

1. **æ‰¹å¤„ç†å¹¶è¡Œ**ï¼šå°†å¤§é‡æ–‡ä»¶åˆ†æ‰¹å¹¶è¡Œå¤„ç†
   - ä»£ç æ‰¹é‡è§£æèŠ‚ç‚¹ï¼šå¹¶è¡Œè§£æå¤šä¸ªä»£ç æ–‡ä»¶
   - æ¨¡å—æ‰¹é‡ç”ŸæˆèŠ‚ç‚¹ï¼šå¹¶è¡Œç”Ÿæˆå¤šä¸ªæ¨¡å—æ–‡æ¡£

2. **æµç¨‹å¹¶è¡Œ**ï¼šå¹¶è¡Œæ‰§è¡Œå¤šä¸ªå†…å®¹ç”Ÿæˆæµç¨‹
   - å¹¶è¡Œå†…å®¹ç”Ÿæˆæµç¨‹ï¼šåŒæ—¶ç”Ÿæˆå¤šç§ç±»å‹çš„æ–‡æ¡£
   - **å¼‚æ­¥å¹¶è¡Œæµç¨‹**ï¼šæ”¯æŒå¼‚æ­¥èŠ‚ç‚¹çš„å¹¶è¡Œæ‰§è¡Œ

3. **æ™ºèƒ½å¹¶å‘æ§åˆ¶**ï¼š
   - å¯é…ç½®çš„æœ€å¤§å¹¶å‘æ•°ï¼Œé¿å…èµ„æºè¿‡è½½
   - ä¿¡å·é‡æœºåˆ¶æ§åˆ¶å¹¶å‘è®¿é—®
   - å¼‚å¸¸éš”ç¦»ï¼Œå•ä¸ªä»»åŠ¡å¤±è´¥ä¸å½±å“å…¶ä»–ä»»åŠ¡

### ğŸ¨ Mermaidå›¾è¡¨éªŒè¯

é¡¹ç›®å†…ç½®äº†å¼ºå¤§çš„Mermaidå›¾è¡¨éªŒè¯å’Œä¿®å¤åŠŸèƒ½ï¼š

1. **å¤šå±‚éªŒè¯æœºåˆ¶**ï¼š
   - ä¼˜å…ˆä½¿ç”¨mermaid-cliè¿›è¡ŒçœŸå®æ¸²æŸ“éªŒè¯
   - å›é€€åˆ°åŸºäºè§„åˆ™çš„è¯­æ³•æ£€æŸ¥
   - æ”¯æŒå¤šç§å›¾è¡¨ç±»å‹éªŒè¯

2. **è‡ªåŠ¨ä¿®å¤åŠŸèƒ½**ï¼š
   - æ£€æµ‹åˆ°è¯­æ³•é”™è¯¯æ—¶è‡ªåŠ¨è°ƒç”¨LLMé‡æ–°ç”Ÿæˆ
   - ä¿ç•™åŸå§‹æ–‡ä»¶å¤‡ä»½
   - æ™ºèƒ½é”™è¯¯å®šä½å’Œä¿®å¤å»ºè®®

3. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - è¿›ç¨‹æ± éš”ç¦»ï¼Œé¿å…ä¸»çº¿ç¨‹é˜»å¡
   - å¼‚æ­¥éªŒè¯ï¼Œæå‡å¤„ç†æ•ˆç‡
   - ç¼“å­˜éªŒè¯ç»“æœï¼Œé¿å…é‡å¤æ£€æŸ¥

### ğŸ“ˆ è´¨é‡è¯„ä¼°ç³»ç»Ÿ

é¡¹ç›®é‡‡ç”¨7ç»´åº¦è´¨é‡è¯„ä¼°ä½“ç³»ï¼š

1. **è¯„ä¼°ç»´åº¦**ï¼š
   - ğŸ“š å®Œæ•´æ€§ï¼šå†…å®¹è¦†ç›–åº¦å’Œä¿¡æ¯å®Œæ•´æ€§
   - âœ… å‡†ç¡®æ€§ï¼šæŠ€æœ¯ä¿¡æ¯å’Œä»£ç ç¤ºä¾‹çš„æ­£ç¡®æ€§
   - ğŸ“– å¯è¯»æ€§ï¼šè¯­è¨€è¡¨è¾¾å’Œé€»è¾‘ç»“æ„çš„æ¸…æ™°åº¦
   - ğŸ¨ æ ¼å¼åŒ–ï¼šMarkdownè¯­æ³•å’Œæ’ç‰ˆçš„è§„èŒƒæ€§
   - ğŸ“Š å¯è§†åŒ–ï¼šå›¾è¡¨å’Œç¤ºæ„å›¾çš„ä¸°å¯Œç¨‹åº¦
   - ğŸ“ æ•™å­¦ä»·å€¼ï¼šæ–‡æ¡£çš„æ•™å­¦æ•ˆæœå’Œå­¦ä¹ ä»·å€¼
   - ğŸ”§ å®ç”¨æ€§ï¼šä»£ç ç¤ºä¾‹å’Œå®è·µæŒ‡å¯¼çš„å®ç”¨æ€§

2. **æ™ºèƒ½ä¼˜åŒ–**ï¼š
   - ä½äºé˜ˆå€¼çš„æ–‡æ¡£è‡ªåŠ¨è§¦å‘é‡æ–°ç”Ÿæˆ
   - æä¾›å…·ä½“çš„æ”¹è¿›å»ºè®®å’Œä¼˜å…ˆçº§
   - æ”¯æŒè¿­ä»£ä¼˜åŒ–ï¼ŒæŒç»­æå‡è´¨é‡

## è´¡çŒ®

æ¬¢è¿æäº¤ Pull Request å’Œ Issueã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·éšæ—¶æå‡ºã€‚

## è®¸å¯è¯

MIT
